<!DOCTYPE HTML>
<!--
	Urban by TEMPLATED
	templated.co @templatedco
	Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->
<html>
	<head>
		<title>Determining Eligibility</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="assets/css/main.css" /> 
	</head>
	<body class="subpage">

		<!-- Header -->
			<header id="header">
				<div class="logo"><a href="index.html">CS290 How-To Guide <span>by CHRIS MERRILL</span></a></div>
				<a href="#menu">Menu</a>
			</header>

		<!-- Nav -->
			<nav id="menu">
				<ul class="links">
					<li><a href="index.html">Home</a></li>
					<li><a href="overview.html">Overview</a></li>
					<li><a href="partOne.html">Setting Up and Using the API</a></li>
					<li><a href="partTwo.html">Tracking Post Likes</a></li>
					<li><a href="partThree.html">Identifying Participants</a></li>
					<li><a href="partFour.html">Determining Eligibility</a></li>
					<li><a href="partFive.html">Declaring A Winner</a></li>
				</ul>
			</nav>

		<!-- Main -->
			<div id="main">

			<!-- Section -->
				<section class="wrapper">
					<div class="inner">
						<header class="align-center">
							<h1>Part Four</h1>
							<h4>Determining Eligibility</h4>
						</header>
						<div class="flex flex-2">
							<div class="col col2">
								<h3>Purpose</h3>
								<p>At this point we could choose a random participant and name them the winner of the contest, but we have still forgotten to check one thing: whether or not the participant has also liked the page we are trying to promote. After all, the entire point of running a Facbook contest is to promote a page. Therefore we need to add a section to our code that checks if each participant also likes our page. If so, then they will be labeled an "eligible" participant.</p>
								
								<h3>Making The API Call</h3>
								<p>In order to cross check whether or not a user likes a particular page, we need to construct the following URL:</p>
								<p>https://graph.facebook.com/v2.3/<font color="purple">{USER ID}</font>/likes/<font color="purple">{PAGE ID}</font>?access_token=<font color="purple">{ACCESS TOKEN VALUE}</font></P>
								<p>This URL will be sent as an HTTP GET request to the Graph API. The API will then return a data object that will only be populated if the user liked the page in question. Therefore we can treat the response as a boolean value by checking <font color="purple">"if (response.data.length != 0)"</font>.</p>
								<p>Now, this API call will need to be nested inside the first API call that we made to check which users like the post. In other words for each user that liked the contest post, we will send a request to the Graph API to check whether or not that user likes our page. If they like both, then we will add them to an array called <font color="purple">"matches"</font> which will hold all of our eligible participants. A working version of this process can be found below: </p>
								
								<center><iframe width="100%" height="300" src="https://jsfiddle.net/cmerrill314/uce51u2b/embedded/js,html,css,result/dark/" allowfullscreen="allowfullscreen" frameborder="0"></iframe></center>
								<p>(Note: The "Result" tab in the above code is only to demonstrate the layout. The AJAX call won't work through JSFiddle, you must run the code through the browser)</p>
								
								<h3>The Final Product</h3>
								<p>This will be the result of running the above code:</p>
								<center><img src="images/results3.jpg" alt="" /></center>
								<p>The user will be able to enter their own Post ID, Page ID and Access Token. After clicking "Submit", the number of participants, number of eligible participants AND list of participants will be populated.</p>
								<p>Now the only thing left to do is to randomly choose a winner from the pool of eligible participants. This will be outlined in Part 5.</p>
								<a href="partFive.html" class="button">Go to Part 5: Declaring A Winner</a>
							</div>
							<div class="col col1 first">
								<div class="image round fit">
									<a href="generic.html" class="link"><img src="images/verify.jpg" alt="" /></a>
								</div>
							</div>
						</div>
						
					</div>
				</section>

		<!-- Footer -->
			<footer id="footer">	
				<center><p>This guide was created by Chris Merrill for CS290:Web Development at OSU <br>
				The styling of the guide was downloaded from TEMPLATED and altered as needed <br>
				The royalty free images used in this guide were obtained from both flaticon.com and pexels.com <br>
				The code for HTTP requests was modeled after Justin Wolford's AJAX course materials and adjusted as needed for the project</p></center>
			</footer>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
	</body>
</html>
